1. Настройка службы ssh

1.1. Установите службу ssh на клиенте и сервере (если она не была установлена ранее).

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/811b8ecb-e301-4ebf-8d7f-123779d96ce9)

1.2. Сгенерируйте ключи SSH на клиенте и сервере.

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/befbde74-776a-4712-bab9-a4bfbb285c4c)

1.3. Загрузите ключ на сервер. 

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/00b14b57-901b-44f9-9fcb-a891af24a3bd)

1.4. Подключитесь к серверу по SSH.

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/582d86e6-dd7b-4971-9fb7-0158fda874de)


1.5. Отключение проверки пароля. Если пароль больше не будет использоваться, то для увеличения безопасности системы лучше его вовсе отключить. Сначала нужно убедиться, что ключ надежно сохранен и вы его не потеряете, потому что по паролю вы больше не войдете. Авторизуйтесь на сервере, затем откройте конфигурационный файл /etc/ssh/sshd_config 

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/605dac80-fd3f-4f3d-aea5-3dfb02dbb37b)

1.6. Установите нестандартный порт для SSH (директива Port). 

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/27de4d92-8d84-44c4-af43-233e9beb6eb4)

1.7. Cохраните файл и перезапустите службу ssh. Дальше будет возможно только подключение по ключу SSH, пароль не будет приниматься.

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/adf4b1e6-e082-4f1e-9d67-c2fc146fa15d)

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/9514e081-e579-401a-b32f-896a1aa502c0)

Переадресация портов SSH может осуществляться по трём типам:
1) Перенаправление локального порта. Соединение перенаправляется с клиентского хоста на SSH-сервер и впоследствии на порт хоста назначения.
2) Перенаправление удаленного порта. Соединение перенаправляется с хоста сервера на клиентский хост и впоследствии на порт хоста назначения.
3) Динамическая переадресация портов. В данном случае создается прокси-сервер SOCKS, который в свою очередь обеспечивает связь через ряд портов.


Предварительно: разрешить TcpForwarding и GatewayPorts. В файле /etc/ssh/sshd_config добавить следующую конфигурацию:
AllowTcpForwarding yes
GatewayPorts yes

2.1. Переадресация локального порта.
Перенаправление порта SSH-клиента (на локальном компьютере), на порт SSH-сервера (удаленного компьютера) и далее на порт, расположенный на конечном компьютере. Тот в свою очередь может являться удаленным SSH-сервером или каким-либо иным компьютером.
Перенаправление локальных портов требуется для подключения к удаленной службе во внутренней сети. Это может быть, к примеру, база данных или системы удалённого доступа. В Linux, MacOS и прочих Unix-системах, для установки локальной переадресации портов нужно использовать следующую команду:

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/56cfc3e4-1a0c-4be6-a415-18d7e5a67086)

2.2. Переадресация удаленного порта.
Перенаправление удаленного порта является противоположным случаю с портом локальным. Здесь можно перенаправить порт на удаленном компьютере (SSH-сервер) на порт локального компьютера (SSH-клиент), а затем на порт конечного компьютера. Выполняется с помощью команды:
ssh -R [REMOTE:]REMOTE_PORT:DESTINATION:DESTINATION_PORT [USER@]SSH_SERVER

[REMOTE:]REMOTE_PORT – IP-адрес и номер порта удаленного SSH-сервера. Если значение REMOTE не выставлено, удаленный SSH-сервер свяжется сразу со всеми интерфейсами.
DESTINATION:DESTINATION_PORT – IP/имя хоста и порт машины назначения.
[USER@]SERVER_IP – удаленный пользователь SSH и IP-адрес сервера.
 
Удаленная переадресация портов в основном используется, чтобы предоставить кому-то извне доступ к одной из внутренних служб.

2.3. Динамическая переадресация портов.
Динамическая переадресация портов дает возможность создать сокет на локальном компьютере (SSH-клиент), который выступает в качестве прокси-сервера SOCKS. Когда клиент подсоединяется к данному порту, соединение перенаправляется на удаленный компьютер (SSH-сервер), который далее идет на динамический порт компьютера назначения. Выполняется с помощью команды:
ssh -D [LOCAL_IP:]LOCAL_PORT [USER@]SSH_SERVER
[LOCAL_IP:]LOCAL_PORT – IP-адрес и номер порта локального компьютера. Если LOCAL_IP не указан, SSH-клиент привязывается к localhost.
[USER@]SERVER_IP – Удаленный пользователь SSH и IP-адрес сервера.

Создайте динамическую переадресацию портов, с помощью которой на локальном хосте можно открыть порта прокси-сервера, работающего по протоколам SOCKS4/5. В настройках proxy в операционной системе укажите SOCKS-прокси 127.0.0.1:8080.

![image](https://github.com/GlamorousCar/AOS-practices/assets/48102376/b45c1974-65d2-4492-8a32-ec0a0cff4f65)







